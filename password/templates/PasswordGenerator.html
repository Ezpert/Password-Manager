<!DOCTYPE html>
<html>
<head>
    <title>Password Generator</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <form method="post" onsubmit="event.preventDefault(); generatePassword();">
        {% csrf_token %}
        {{ form.as_p }}
        <label for="password-length">Password Length:</label>
        <input type="number" id="password-length" name="password-length" min="1" max="20" value="10"><br>

        <input type="checkbox" id="include-numbers" name="include-numbers" checked>
        <label for="include-numbers">Include Numbers</label><br>
        <input type="checkbox" id="include-lowercase" name="include-lowercase" checked>
        <label for="include-lowercase">Include Lowercase Characters</label><br>
        <input type="checkbox" id="include-uppercase" name="include-uppercase" checked>
        <label for="include-uppercase">Include Uppercase Characters</label><br>
        <input type="checkbox" id="include-symbols" name="include-symbols">
        <label for="include-symbols">Include Symbols</label><br>

        <input type="checkbox" id="no-duplicates" name="no-duplicates">
        <label for="no-duplicates">No Duplicate Characters</label><br>

        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" min="1" max="10" value="1"><br>

        <button type="submit">Generate Password</button>
    </form>

    <div id="generated-passwords"></div>

    <script>
        function generatePassword() {
            const length = $('#password-length').val();
            const includeNumbers = $('#include-numbers').is(':checked');
            const includeLowercase = $('#include-lowercase').is(':checked');
            const includeUppercase = $('#include-uppercase').is(':checked');
            const includeSymbols = $('#include-symbols').is(':checked');
            const noDuplicates = $('#no-duplicates').is(':checked');
            const quantity = $('#quantity').val();
            $.ajax({
                url: '{% url "generate_password_ajax" %}',
                type: 'get',
                data: {
                    'length': length,
                    'include_numbers': includeNumbers,
                    'include_lowercase': includeLowercase,
                    'include_uppercase': includeUppercase,
                    'include_symbols': includeSymbols,
                    'no_duplicates': noDuplicates,
                    'quantity': quantity
                },
                success: function(response) {
                    $('#generated-passwords').empty();
                    response.passwords.forEach(function(password) {
                        $('#generated-passwords').append($('<p>').text(password));
                    });
                },
                error: function() {
                    alert('Error generating password');
                }
            });
        }
    </script>
</body>
</html>
